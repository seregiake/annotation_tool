{"ast":null,"code":"var _jsxFileName = \"/Users/serenagiachetti/Desktop/projects/annotation_tool/frontend/src/components/OutlineCanvas.js\";\nimport React, { Component } from 'react';\n\nclass OutlineCanvas extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      boundaries: [],\n      size: []\n    };\n  }\n\n  componentDidMount() {\n    this.updateCanvas();\n  }\n\n  componentDidUpdate() {\n    this.updateCanvas();\n  }\n\n  updateCanvas() {\n    const canvas = this.refs.outline;\n    const context = canvas.getContext('2d');\n    const {\n      boundaries,\n      size,\n      color\n    } = this.props; //console.log(size);\n    // eslint-disable-next-line\n\n    if (boundaries != undefined && size != undefined && color != undefined) {\n      context.canvas.width = size[0];\n      context.canvas.height = size[1];\n      context.clearRect(0, 0, size[0], size[1]); // draw children “components”\n\n      outline({\n        context,\n        boundaries,\n        size,\n        color\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(\"canvas\", {\n      id: \"outline\",\n      ref: \"outline\",\n      style: {\n        zIndex: 2,\n        position: 'relative'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41\n      },\n      __self: this\n    }, \"Sorry, your browser doesn't support the <canvas> element.\");\n  }\n\n}\n\nexport default OutlineCanvas;\n\nfunction outline(props) {\n  const {\n    context,\n    size,\n    boundaries,\n    color\n  } = props;\n  let outline_matrix = JSON.parse(boundaries); // console.log(outline_matrix[0][0]);\n\n  let outlineLayerData = context.createImageData(size[0], size[1]);\n  let outlineImage = outlineLayerData.data; // scroll the matrix with boundaries to create the outline image\n\n  let len = outlineLayerData.data.length; // console.log(len);\n\n  let col = 0,\n      row = 0;\n  let pixel = [];\n\n  for (let i = 0; i < len && row < size[1]; i += 4) {\n    pixel = outline_matrix[row][col]; // console.log(\"pixel: \" + pixel);\n\n    if (String(pixel[0]) === '0') {\n      outlineImage[i] = color[0]; // r\n\n      outlineImage[i + 1] = color[1]; // g\n\n      outlineImage[i + 2] = color[2]; // b\n\n      outlineImage[i + 3] = color[3]; // a\n    }\n\n    if (col === size[0] - 1) {\n      row++;\n      col = 0;\n    } else {\n      col++;\n    }\n  } // draw the outline layer in the 3° canvas\n\n\n  context.putImageData(outlineLayerData, 0, 0);\n}","map":{"version":3,"sources":["/Users/serenagiachetti/Desktop/projects/annotation_tool/frontend/src/components/OutlineCanvas.js"],"names":["React","Component","OutlineCanvas","constructor","props","state","boundaries","size","componentDidMount","updateCanvas","componentDidUpdate","canvas","refs","outline","context","getContext","color","undefined","width","height","clearRect","render","zIndex","position","outline_matrix","JSON","parse","outlineLayerData","createImageData","outlineImage","data","len","length","col","row","pixel","i","String","putImageData"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nclass OutlineCanvas extends Component {\n\n    constructor (props){\n        super(props);\n        this.state = {\n            boundaries: [],\n            size: []\n        };\n    }\n\n    componentDidMount() {\n        this.updateCanvas();\n    }\n\n    componentDidUpdate() {\n        this.updateCanvas();\n    }\n\n    updateCanvas() {\n        const canvas = this.refs.outline;\n        const context = canvas.getContext('2d');\n        const { boundaries, size, color } = this.props;\n\n        //console.log(size);\n        // eslint-disable-next-line\n        if (boundaries != undefined && size != undefined && color != undefined){\n            context.canvas.width = size[0];\n            context.canvas.height = size[1];\n            context.clearRect(0,0, size[0], size[1]);\n\n            // draw children “components”\n            outline({context, boundaries, size, color});\n\n        }\n    }\n\n    render() {\n\n    return(\n        <canvas id=\"outline\" ref=\"outline\" style={{ zIndex: 2, position:'relative'}}>\n            Sorry, your browser doesn't support the &lt;canvas&gt; element.\n        </canvas>\n    )\n\n    \n    \n    \n    }\n    \n}\nexport default OutlineCanvas;\n\nfunction outline(props) {\n    const {context, size, boundaries, color} = props;\n    let outline_matrix = JSON.parse(boundaries);\n\n    // console.log(outline_matrix[0][0]);\n\n    let outlineLayerData = context.createImageData(size[0], size[1]);\n    let outlineImage = outlineLayerData.data;\n    // scroll the matrix with boundaries to create the outline image\n    let len = outlineLayerData.data.length;\n    // console.log(len);\n    let col = 0, row = 0;\n    let pixel = [];\n    for (let i = 0; i < len && row < size[1]; i += 4) {\n        pixel = outline_matrix[row][col];\n        // console.log(\"pixel: \" + pixel);\n        if (String(pixel[0]) === '0') {\n            outlineImage[i] = color[0];       // r\n            outlineImage[i + 1] = color[1];   // g\n            outlineImage[i + 2] = color[2];   // b\n            outlineImage[i + 3] = color[3];   // a\n        }\n        if (col === size[0] - 1) {\n            row++;\n            col = 0;\n        } else {\n            col++;\n        }\n\n    }\n\n    // draw the outline layer in the 3° canvas\n    context.putImageData(outlineLayerData, 0, 0);\n\n\n}"]},"metadata":{},"sourceType":"module"}