{"ast":null,"code":"var _jsxFileName = \"/Users/serenagiachetti/Desktop/projects/annotation_tool/frontend/src/containers/AnnotationView.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport BackgroundCanvas from '../components/BackgroundCanvas';\nimport ColorCanvas from '../components/ColorCanvas';\nimport OutlineCanvas from '../components/OutlineCanvas'; // import MaskSection from '../components/MaskSection';\n\nimport { Col, Row } from \"react-bootstrap\";\nimport { Button, Form, Input } from \"antd\"; // import AnnotationSection from \"../components/AnnotationSection\";\n\nclass AnnotationView extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      item: [],\n      mask: [],\n      task: [],\n      categories: [],\n      annotation: [],\n      imageID: this.props.match.params.imageID,\n      taskID: this.props.match.params.taskID,\n      outlineColor: [0, 0, 0, 127],\n      hexMaskColor: '#000000',\n      outlineLabel: '50%',\n      outlineRange: 50,\n      annColor: [255, 0, 0, 255],\n      hexAnnColor: '#FF0000'\n    };\n\n    this.fetchImage = () => {\n      this.setState({\n        imageID: this.props.match.params.imageID,\n        taskID: this.props.match.params.taskID\n      });\n      axios.get(\"http://127.0.0.1:5000/image/\" + this.state.imageID).then(res => {\n        this.setState({\n          item: res.data\n        }); // console.log(this.state);\n      });\n      axios.get(\"http://127.0.0.1:5000/tasks/\" + this.state.taskID).then(res => {\n        this.setState({\n          task: res.data\n        });\n        axios.get(\"http://127.0.0.1:5000/categories/\" + this.state.task.super_id).then(res => {\n          this.setState({\n            categories: res.data\n          });\n        }); // console.log(this.state);\n\n        const user_id = 1;\n        axios.get(\"http://127.0.0.1:5000/masks/\" + user_id + \"/\" + this.state.imageID + \"/\" + this.state.task.super_id).then(res => {\n          this.setState({\n            mask: res.data\n          });\n          console.log(this.state);\n        });\n      });\n    };\n\n    this.handleMaskSubmit = event => {\n      //event.preventDefault();\n      const kernel = event.target.elements.kernel.value;\n      const dist = event.target.elements.dist.value;\n      const ratio = event.target.elements.ratio.value;\n      const user_id = 1;\n      let requestType = 'POST';\n\n      if (typeof this.state.mask != 'string') {\n        requestType = 'PUT';\n      }\n\n      console.log(this.state.imageID);\n\n      switch (requestType) {\n        case 'POST':\n          return axios.post('http://localhost:5000/masks/' + user_id, {\n            id: this.state.imageID,\n            super: this.state.task.super_id,\n            ratio: ratio,\n            kernel: kernel,\n            dist: dist\n          }).then(res => console.log(res)).catch(error => console.err(error));\n\n        case 'PUT':\n          return axios.put('http://localhost:5000/masks/' + user_id + \"/\" + this.state.imageID + \"/\" + this.state.task.super_id, {\n            id: this.state.imageID,\n            super: this.state.task.super_id,\n            ratio: ratio,\n            kernel: kernel,\n            dist: dist\n          }).then(res => console.log(res)).catch(error => console.err(error));\n\n        default:\n          return;\n      }\n    };\n\n    this.handleAnnSubmit = event => {\n      //event.preventDefault();\n      const kernel = event.target.elements.kernel.value;\n      const dist = event.target.elements.dist.value;\n      const ratio = event.target.elements.ratio.value;\n      const user_id = 1;\n      let requestType = 'POST';\n\n      if (typeof this.state.mask != 'string') {\n        requestType = 'PUT';\n      }\n\n      console.log(this.state.imageID);\n\n      switch (requestType) {\n        case 'POST':\n          return axios.post('http://localhost:5000/masks/' + user_id, {\n            id: this.state.imageID,\n            super: this.state.task.super_id,\n            ratio: ratio,\n            kernel: kernel,\n            dist: dist\n          }).then(res => console.log(res)).catch(error => console.err(error));\n\n        case 'PUT':\n          return axios.put('http://localhost:5000/masks/' + user_id + \"/\" + this.state.imageID + \"/\" + this.state.task.super_id, {\n            id: this.state.imageID,\n            super: this.state.task.super_id,\n            ratio: ratio,\n            kernel: kernel,\n            dist: dist\n          }).then(res => console.log(res)).catch(error => console.err(error));\n\n        default:\n          return;\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.fetchImage();\n    console.log(this.state);\n  }\n\n  componentDidUpdate() {\n    this.updateMaskSettings();\n    this.createAnnSettings();\n  }\n\n  updateMaskSettings() {\n    const kernel = document.getElementById('kernel');\n    const dist = document.getElementById('dist');\n    const ratio = document.getElementById('ratio'); // eslint-disable-next-line\n\n    if (this.state.mask.kernel != undefined) {\n      kernel.value = this.state.mask.kernel;\n      dist.value = this.state.mask.dist;\n      ratio.value = this.state.mask.ratio;\n      console.log(kernel.value);\n      console.log(dist.value);\n      console.log(ratio.value);\n    }\n  }\n\n  createAnnSettings() {\n    // eslint-disable-next-line\n    if (this.state.task.super_id != undefined) {\n      let select = document.getElementById('ann_class');\n      select.innerText = \"\";\n      let option = document.createElement(\"option\");\n      option.id = \"0\";\n      option.value = \"0\";\n      option.label = \"\";\n      select.append(option);\n      let index = 0;\n\n      for (let i = 0; i < this.state.categories.length; i++) {\n        index = index + 1;\n        option = document.createElement(\"option\");\n        option.id = index;\n        option.value = this.state.categories[i][\"id\"];\n        option.label = this.state.categories[i]['name'];\n        select.append(option);\n      }\n    }\n  }\n\n  render() {\n    const {\n      item,\n      mask,\n      task,\n      imageID\n    } = this.state;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"canvases_div\",\n      className: \"overflow-auto\",\n      style: {\n        position: 'relative',\n        minHeight: '300px',\n        background: 'yellow'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, React.createElement(BackgroundCanvas, {\n      image: item,\n      size: item.size,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }), React.createElement(ColorCanvas, {\n      size: item.size,\n      mask: mask.mask,\n      color: this.state.annColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }), React.createElement(OutlineCanvas, {\n      size: item.size,\n      boundaries: mask.boundaries,\n      color: this.state.outlineColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      style: {\n        paddingTop: 20,\n        minHeight: '800px',\n        color: 'rgb(25, 25, 112)'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        position: 'relative',\n        width: '100%',\n        height: '100%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, React.createElement(Col, {\n      style: {\n        position: 'absolute',\n        marginTop: 20,\n        marginBottom: 20,\n        width: '100%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, \"\\u2699 Mask Settings \\u2699\"), React.createElement(Form, {\n      onSubmit: event => this.handleMaskSubmit(event),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xs: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, React.createElement(Form.Item, {\n      label: \"Kernel\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, React.createElement(Input, {\n      id: \"kernel\",\n      type: \"number\",\n      min: 0,\n      defaultValue: mask.kernel,\n      \"data-toggle\": \"tooltip\",\n      \"data-placement\": \"bottom\",\n      style: {\n        width: '50%'\n      },\n      title: \"Kernel: Width of Gaussian kernel used in smoothing the sample density. Higher means fewer clusters.\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }))), \" \", React.createElement(Col, {\n      xs: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, React.createElement(Form.Item, {\n      label: \"Max-dist\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, React.createElement(Input, {\n      id: \"dist\",\n      type: \"number\",\n      min: 0,\n      defaultValue: mask.dist,\n      \"data-toggle\": \"tooltip\",\n      \"data-placement\": \"bottom\",\n      style: {\n        width: '50%'\n      },\n      title: \"Max-dist: Cut-off point for data distances. Higher means fewer clusters.\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }))), \" \", React.createElement(Col, {\n      xs: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, React.createElement(Form.Item, {\n      label: \"Ratio\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, React.createElement(Input, {\n      id: \"ratio\",\n      type: \"number\",\n      min: 0,\n      step: 0.1,\n      precision: 1,\n      max: 1,\n      defaultValue: mask.ratio,\n      \"data-toggle\": \"tooltip\",\n      \"data-placement\": \"bottom\",\n      style: {\n        width: '50%'\n      },\n      title: \"Ratio: (between 0 and 1). Balances color-space proximity and image-space proximity. Higher values give more weight to color-space.\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    })))), React.createElement(Form.Item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }), React.createElement(Button, {\n      htmlType: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }, \"Create\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        width: '100%',\n        border: '2px dotted rgb(25, 25, 112)',\n        padding: 20,\n        background: 'rgba(112, 112, 136, 0.2)',\n        color: 'rgb(25, 25, 112)'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }, \"\\u2042 Mask Color & Opacity \\u2042\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }), React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"opacity\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    }, \"Opacity:\"), React.createElement(\"datalist\", {\n      id: \"rate\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }), React.createElement(\"option\", {\n      value: \"10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }), React.createElement(\"option\", {\n      value: \"20\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }), React.createElement(\"option\", {\n      value: \"30\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }), React.createElement(\"option\", {\n      value: \"40\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }), React.createElement(\"option\", {\n      value: \"50\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263\n      },\n      __self: this\n    }), React.createElement(\"option\", {\n      value: \"60\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    }), React.createElement(\"option\", {\n      value: \"70\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }), React.createElement(\"option\", {\n      value: \"80\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266\n      },\n      __self: this\n    }), React.createElement(\"option\", {\n      value: \"90\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    }), React.createElement(\"option\", {\n      value: \"100\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-9\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"range\",\n      id: \"opacity\",\n      className: \"form-control-range\",\n      min: \"0\",\n      max: \"100\",\n      step: \"10\",\n      value: this.state.outlineRange,\n      onChange: event => this.changeOpacity(event),\n      list: \"rate\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      id: \"mask_op_value\",\n      disabled: true,\n      value: this.state.outlineLabel,\n      size: \"4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"mask_color\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281\n      },\n      __self: this\n    }, \"Color:\"), React.createElement(\"input\", {\n      type: \"color\",\n      id: \"mask_color\",\n      defaultValue: this.state.hexMaskColor,\n      onChange: event => this.changeMaskColor(event),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282\n      },\n      __self: this\n    }))))), React.createElement(\"div\", {\n      style: {\n        width: '100%',\n        height: '100%',\n        marginTop: 20,\n        marginBottom: 20\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291\n      },\n      __self: this\n    }, \"\\u270E Annotations \\u270E\"), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292\n      },\n      __self: this\n    }, React.createElement(Col, {\n      style: {\n        marginTop: 20,\n        marginBottom: 20,\n        width: '100%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294\n      },\n      __self: this\n    }, \"Create/Edit an annotation:\"), React.createElement(Form, {\n      onSubmit: event => this.handleAnnSubmit(event),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"color\",\n      id: \"ann_color\",\n      defaultValue: this.state.hexAnnColor,\n      onChange: event => this.changeAnnColor(event),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297\n      },\n      __self: this\n    }), React.createElement(\"select\", {\n      id: \"ann_class\",\n      style: {\n        width: '70%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      href: \"#\",\n      onClick: saveAnnotation(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302\n      },\n      __self: this\n    }, \"V\"), React.createElement(\"button\", {\n      href: \"#\",\n      onClick: cancelAnnotation(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303\n      },\n      __self: this\n    }, \"X\")))), React.createElement(Col, {\n      style: {\n        marginTop: 20,\n        marginBottom: 20,\n        width: '100%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"ann_opacity\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311\n      },\n      __self: this\n    }, \"Opacity:\"), React.createElement(\"datalist\", {\n      id: \"rate\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313\n      },\n      __self: this\n    }), React.createElement(\"option\", {\n      value: \"10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314\n      },\n      __self: this\n    }), React.createElement(\"option\", {\n      value: \"20\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315\n      },\n      __self: this\n    }), React.createElement(\"option\", {\n      value: \"30\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316\n      },\n      __self: this\n    }), React.createElement(\"option\", {\n      value: \"40\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317\n      },\n      __self: this\n    }), React.createElement(\"option\", {\n      value: \"50\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318\n      },\n      __self: this\n    }), React.createElement(\"option\", {\n      value: \"60\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319\n      },\n      __self: this\n    }), React.createElement(\"option\", {\n      value: \"70\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320\n      },\n      __self: this\n    }), React.createElement(\"option\", {\n      value: \"80\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321\n      },\n      __self: this\n    }), React.createElement(\"option\", {\n      value: \"90\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322\n      },\n      __self: this\n    }), React.createElement(\"option\", {\n      value: \"100\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323\n      },\n      __self: this\n    })), React.createElement(\"input\", {\n      type: \"range\",\n      id: \"ann_opacity\",\n      className: \"form-control-range\",\n      min: \"0\",\n      max: \"100\",\n      step: \"10\",\n      value: this.state.outlineRange,\n      onChange: event => this.changeOpacity(event),\n      list: \"rate\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"text\",\n      id: \"mask_op_value\",\n      disabled: true,\n      value: this.state.outlineLabel,\n      size: \"4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333\n      },\n      __self: this\n    }), React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334\n      },\n      __self: this\n    }, \"List of annotations:\"))))))));\n  }\n\n  changeOpacity(event) {\n    //console.log('change opacity');\n    let new_opacity = event.target.value;\n    let opacity_value = Math.round(new_opacity * 255 / 100);\n    let opacity_label = new_opacity + \"%\";\n    console.log(opacity_label);\n    console.log(new_opacity);\n    this.setState(prevState => {\n      return {\n        outlineColor: [prevState.outlineColor[0], prevState.outlineColor[1], prevState.outlineColor[2], opacity_value],\n        outlineLabel: opacity_label,\n        outlineRange: new_opacity\n      };\n    });\n  }\n\n  changeMaskColor(event) {\n    //console.log('change color');\n    let hex = event.target.value;\n    let rgb_color = hexToRGB(hex);\n    this.setState(prevState => {\n      return {\n        outlineColor: [rgb_color.r, rgb_color.g, rgb_color.b, prevState.outlineColor[3]],\n        hexMaskColor: hex\n      };\n    });\n  }\n\n  changeAnnColor(event) {\n    //console.log('change color');\n    let hex = event.target.value;\n    let rgb_color = hexToRGB(hex);\n    this.setState(prevState => {\n      return {\n        annColor: [rgb_color.r, rgb_color.g, rgb_color.b, prevState.annColor[3]],\n        hexAnnColor: hex\n      };\n    });\n  }\n\n}\n\nexport default AnnotationView;\n\nfunction saveAnnotation() {// console.log('change opacity');\n}\n\nfunction cancelAnnotation() {// console.log('change opacity');\n}\n\nfunction hexToRGB(hex) {\n  let result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  return result ? {\n    r: parseInt(result[1], 16),\n    g: parseInt(result[2], 16),\n    b: parseInt(result[3], 16)\n  } : null;\n}\n/*\n<BackgroundCanvas image={item} size={item.size} />\n                        <ColorCanvas size={item.size} />\n \n                        { this.displayMask(mask, item) }\n\n<ColorCanvas style={{ zIndex: 2, position:'absolute' }} size={item.size} />\n<OutlineCanvas style={{ zIndex: 3, position:'absolute' }} size={item.size} />\n                     \n*/\n// <img src={item.url} alt={item.name} draggable=\"false\" />","map":{"version":3,"sources":["/Users/serenagiachetti/Desktop/projects/annotation_tool/frontend/src/containers/AnnotationView.js"],"names":["React","Component","axios","BackgroundCanvas","ColorCanvas","OutlineCanvas","Col","Row","Button","Form","Input","AnnotationView","state","item","mask","task","categories","annotation","imageID","props","match","params","taskID","outlineColor","hexMaskColor","outlineLabel","outlineRange","annColor","hexAnnColor","fetchImage","setState","get","then","res","data","super_id","user_id","console","log","handleMaskSubmit","event","kernel","target","elements","value","dist","ratio","requestType","post","id","super","catch","error","err","put","handleAnnSubmit","componentDidMount","componentDidUpdate","updateMaskSettings","createAnnSettings","document","getElementById","undefined","select","innerText","option","createElement","label","append","index","i","length","render","position","minHeight","background","size","boundaries","paddingTop","color","width","height","marginTop","marginBottom","border","padding","changeOpacity","changeMaskColor","changeAnnColor","saveAnnotation","cancelAnnotation","new_opacity","opacity_value","Math","round","opacity_label","prevState","hex","rgb_color","hexToRGB","r","g","b","result","exec","parseInt"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport BackgroundCanvas from '../components/BackgroundCanvas';\nimport ColorCanvas from '../components/ColorCanvas';\nimport OutlineCanvas from '../components/OutlineCanvas';\n// import MaskSection from '../components/MaskSection';\nimport {Col, Row} from \"react-bootstrap\";\nimport {Button, Form, Input} from \"antd\";\n// import AnnotationSection from \"../components/AnnotationSection\";\n\n\nclass AnnotationView extends Component {\n\n    state = {\n        item: [],\n        mask: [],\n        task: [],\n        categories: [],\n        annotation: [],\n        imageID: this.props.match.params.imageID,\n        taskID: this.props.match.params.taskID,\n        outlineColor: [0, 0, 0, 127],\n        hexMaskColor: '#000000',\n        outlineLabel: '50%',\n        outlineRange: 50,\n        annColor: [255, 0, 0, 255],\n        hexAnnColor: '#FF0000',\n\n    }\n\n    fetchImage = () => {\n        this.setState({\n            imageID: this.props.match.params.imageID,\n            taskID: this.props.match.params.taskID\n        });\n        axios.get(\"http://127.0.0.1:5000/image/\" + this.state.imageID).then(res => {\n          this.setState({\n            item: res.data\n        });\n        // console.log(this.state);\n        });\n        axios.get(\"http://127.0.0.1:5000/tasks/\" + this.state.taskID).then(res => {\n          this.setState({\n            task: res.data\n        });\n          axios.get(\"http://127.0.0.1:5000/categories/\" + this.state.task.super_id).then(res => {\n          this.setState({\n            categories: res.data\n        })});\n        // console.log(this.state);\n        const user_id = 1;\n        axios.get(\"http://127.0.0.1:5000/masks/\" + user_id + \"/\" + this.state.imageID + \"/\" + this.state.task.super_id).then(res => {\n            this.setState({\n                mask: res.data\n            });\n            console.log(this.state);\n            });\n        });\n        \n    }\n\n\n    componentDidMount(){\n        this.fetchImage();\n        console.log(this.state);\n    }\n\n    componentDidUpdate(){\n        this.updateMaskSettings();\n        this.createAnnSettings();\n    }\n\n    updateMaskSettings(){\n        const kernel = document.getElementById('kernel');\n        const dist = document.getElementById('dist');\n        const ratio = document.getElementById('ratio');\n\n        // eslint-disable-next-line\n        if (this.state.mask.kernel != undefined){\n            kernel.value = this.state.mask.kernel;\n            dist.value = this.state.mask.dist;\n            ratio.value = this.state.mask.ratio;\n\n            console.log(kernel.value);\n            console.log(dist.value);\n            console.log(ratio.value);\n        }\n\n\n\n    }\n\n    createAnnSettings(){\n        // eslint-disable-next-line\n        if (this.state.task.super_id != undefined){\n\n            let select = document.getElementById('ann_class');\n            select.innerText=\"\";\n            let option = document.createElement(\"option\");\n            option.id = \"0\";\n            option.value = \"0\";\n            option.label =  \"\";\n            select.append(option);\n\n            let index = 0;\n            for( let i = 0; i < this.state.categories.length; i++){\n                index = index + 1;\n                option = document.createElement(\"option\");\n                option.id = index;\n                option.value = this.state.categories[i][\"id\"];\n                option.label =  this.state.categories[i]['name'];\n                select.append(option);\n            }\n\n        }\n    }\n\n    handleMaskSubmit = (event) => {\n        //event.preventDefault();\n        const kernel = event.target.elements.kernel.value;\n        const dist = event.target.elements.dist.value;\n        const ratio = event.target.elements.ratio.value;\n\n        const user_id = 1;\n\n        let requestType = 'POST';\n        if( typeof this.state.mask != 'string' ){\n            requestType = 'PUT';\n        }\n\n        console.log(this.state.imageID);\n\n        switch ( requestType ){\n            case 'POST':\n                return axios.post('http://localhost:5000/masks/' + user_id, {\n                    id: this.state.imageID,\n                    super: this.state.task.super_id,\n                    ratio : ratio,\n                    kernel : kernel,\n                    dist: dist\n                })\n                .then(res => console.log(res))\n                .catch(error => console.err(error));\n            case 'PUT':\n                return axios.put('http://localhost:5000/masks/' + user_id + \"/\" + this.state.imageID + \"/\" + this.state.task.super_id, {\n                    id: this.state.imageID,\n                    super: this.state.task.super_id,\n                    ratio : ratio,\n                    kernel : kernel,\n                    dist: dist\n                })\n                .then(res => console.log(res))\n                .catch(error => console.err(error));\n            default: return\n        }\n    }\n\n    handleAnnSubmit = (event) => {\n        //event.preventDefault();\n        const kernel = event.target.elements.kernel.value;\n        const dist = event.target.elements.dist.value;\n        const ratio = event.target.elements.ratio.value;\n\n        const user_id = 1;\n\n        let requestType = 'POST';\n        if( typeof this.state.mask != 'string' ){\n            requestType = 'PUT';\n        }\n\n        console.log(this.state.imageID);\n\n        switch ( requestType ){\n            case 'POST':\n                return axios.post('http://localhost:5000/masks/' + user_id, {\n                    id: this.state.imageID,\n                    super: this.state.task.super_id,\n                    ratio : ratio,\n                    kernel : kernel,\n                    dist: dist\n                })\n                .then(res => console.log(res))\n                .catch(error => console.err(error));\n            case 'PUT':\n                return axios.put('http://localhost:5000/masks/' + user_id + \"/\" + this.state.imageID + \"/\" + this.state.task.super_id, {\n                    id: this.state.imageID,\n                    super: this.state.task.super_id,\n                    ratio : ratio,\n                    kernel : kernel,\n                    dist: dist\n                })\n                .then(res => console.log(res))\n                .catch(error => console.err(error));\n            default: return\n        }\n    }\n\n    \n    render() {\n        const { item, mask, task, imageID } = this.state;\n        return(\n                <div >\n                    <div id=\"canvases_div\" className=\"overflow-auto\" style={{ position:'relative', minHeight:'300px', background:'yellow'}}>\n                        <BackgroundCanvas image={item} size={item.size} />\n                        <ColorCanvas size={item.size} mask={mask.mask} color={this.state.annColor}/>\n                        <OutlineCanvas size={item.size} boundaries={mask.boundaries} color={this.state.outlineColor}/>\n\n\n                    </div>\n                    <div style={{ paddingTop:20, minHeight:'800px', color:'rgb(25, 25, 112)' }}>\n\n                        <div style={{ position:'relative', width:'100%', height:'100%' }}>\n                            <Col style={{ position:'absolute', marginTop:20, marginBottom:20, width:'100%' }}>\n                                <h3>&#9881; Mask Settings &#9881;</h3>\n\n                                <Form onSubmit={(event) => this.handleMaskSubmit(\n                                    event)} >\n                                <Row>\n                                    <Col xs >\n                                    <Form.Item label=\"Kernel\" >\n                                        <Input id=\"kernel\" type=\"number\" min={0} defaultValue={mask.kernel}\n                                                data-toggle=\"tooltip\" data-placement=\"bottom\" style={{ width:'50%'}}\n                                                title=\"Kernel: Width of Gaussian kernel used in smoothing the sample density. Higher means fewer clusters.\" />\n                                    </Form.Item>\n                                    </Col> <Col xs >\n                                    <Form.Item label=\"Max-dist\">\n                                        <Input id=\"dist\" type=\"number\" min={0} defaultValue={mask.dist}\n                                                data-toggle=\"tooltip\" data-placement=\"bottom\" style={{ width:'50%'}}\n                                                title=\"Max-dist: Cut-off point for data distances. Higher means fewer clusters.\" />\n                                    </Form.Item>\n                                    </Col> <Col xs >\n                                    <Form.Item label=\"Ratio\">\n                                        <Input id=\"ratio\" type=\"number\" min={0} step={0.1} precision={1} max={1} defaultValue={mask.ratio}\n                                                data-toggle=\"tooltip\" data-placement=\"bottom\" style={{ width:'50%'}}\n                                                title=\"Ratio: (between 0 and 1). Balances color-space proximity and image-space proximity. Higher values give more weight to color-space.\" />\n                                    </Form.Item>\n                                    </Col>\n                                </Row>\n\n                                    <Form.Item >\n                                        <br />\n                                        <Button htmlType=\"submit\" >Create</Button>\n                                        <br />\n                                    </Form.Item>\n                                </Form>\n\n\n                                <br /><br />\n\n\n                                <div style={{ width:'100%', border:'2px dotted rgb(25, 25, 112)', padding:20, background:'rgba(112, 112, 136, 0.2)', color:'rgb(25, 25, 112)'}}>\n                                <h5>&#8258; Mask Color &amp; Opacity &#8258;</h5>\n                                <br />\n                                <Col >\n                                <div className=\"form-row\" >\n                                <label htmlFor=\"opacity\">Opacity:</label>\n                                    <datalist id=\"rate\">\n                                        <option value=\"0\"></option>\n                                        <option value=\"10\"></option>\n                                        <option value=\"20\"></option>\n                                        <option value=\"30\"></option>\n                                        <option value=\"40\"></option>\n                                        <option value=\"50\"></option>\n                                        <option value=\"60\"></option>\n                                        <option value=\"70\"></option>\n                                        <option value=\"80\"></option>\n                                        <option value=\"90\"></option>\n                                        <option value=\"100\"></option>\n                                    </datalist>\n                                    <div className=\"col-9\">\n                                        <input type=\"range\" id=\"opacity\"\n                                               className=\"form-control-range\" min=\"0\" max=\"100\" step=\"10\"\n                                               value={ this.state.outlineRange}\n                                               onChange={(event) => this.changeOpacity(event) }\n                                               list=\"rate\" />\n                                    </div>\n                                    <div className=\"col\">\n                                        <input type=\"text\" id=\"mask_op_value\" disabled value={this.state.outlineLabel} size=\"4\" />\n                                    </div>\n                                    <div className=\"col\">\n                                        <label htmlFor=\"mask_color\">Color:</label>\n                                        <input type=\"color\" id=\"mask_color\" defaultValue={this.state.hexMaskColor}\n                                            onChange={(event) => this.changeMaskColor(event)} />\n                                    </div>\n                                </div>\n                                </Col>\n                                </div>\n\n\n                                <div style={{ width:'100%', height:'100%', marginTop:20, marginBottom:20 }}>\n                                    <h3>&#9998; Annotations &#9998;</h3>\n                                    <Row>\n                                        <Col style={{ marginTop:20, marginBottom:20, width:'100%' }}>\n                                            <h5>Create/Edit an annotation:</h5>\n                                            <Form onSubmit={(event) => this.handleAnnSubmit(event)} >\n                                            <Row>\n                                                <input type=\"color\" id=\"ann_color\" defaultValue={this.state.hexAnnColor}\n                                                onChange={(event) => this.changeAnnColor(event)}/>\n                                                <select id=\"ann_class\" style={{ width:'70%' }}>\n\n                                                </select>\n                                                <button href=\"#\" onClick={saveAnnotation()} >V</button>\n                                                <button href=\"#\" onClick={cancelAnnotation()} >X</button>\n                                            </Row>\n                                            </Form>\n\n\n                                        </Col>\n                                        <Col style={{ marginTop:20, marginBottom:20, width:'100%' }}>\n\n                                            <label htmlFor=\"ann_opacity\">Opacity:</label>\n                                            <datalist id=\"rate\">\n                                                <option value=\"0\"></option>\n                                                <option value=\"10\"></option>\n                                                <option value=\"20\"></option>\n                                                <option value=\"30\"></option>\n                                                <option value=\"40\"></option>\n                                                <option value=\"50\"></option>\n                                                <option value=\"60\"></option>\n                                                <option value=\"70\"></option>\n                                                <option value=\"80\"></option>\n                                                <option value=\"90\"></option>\n                                                <option value=\"100\"></option>\n                                            </datalist>\n\n                                            <input type=\"range\" id=\"ann_opacity\"\n                                                   className=\"form-control-range\" min=\"0\" max=\"100\" step=\"10\"\n                                                   value={ this.state.outlineRange}\n                                                   onChange={(event) => this.changeOpacity(event) }\n                                                   list=\"rate\" />\n\n                                                   <input type=\"text\" id=\"mask_op_value\" disabled value={this.state.outlineLabel} size=\"4\" />\n                                            <br />\n                                            <h5>List of annotations:</h5>\n\n                                        </Col>\n                                    </Row>\n                                </div>\n\n                            </Col>\n                        </div>\n                    </div> \n                </div>\n    \n           \n        )\n        \n    }\n\n\n    changeOpacity(event){\n        //console.log('change opacity');\n\n        let new_opacity = event.target.value;\n        let opacity_value = Math.round(((new_opacity * 255)/100));\n        let opacity_label = new_opacity + \"%\";\n        console.log(opacity_label);\n        console.log(new_opacity);\n\n        this.setState(prevState =>{\n            return {\n                outlineColor: [prevState.outlineColor[0], prevState.outlineColor[1], prevState.outlineColor[2], opacity_value ],\n                outlineLabel: opacity_label,\n                outlineRange: new_opacity\n            }\n        })\n\n    }\n\n    changeMaskColor(event){\n        //console.log('change color');\n\n        let hex = event.target.value;\n        let rgb_color = hexToRGB(hex);\n\n        this.setState(prevState =>{\n            return {\n                outlineColor: [rgb_color.r, rgb_color.g, rgb_color.b, prevState.outlineColor[3] ],\n                hexMaskColor: hex,\n            }\n        })\n\n    }\n\n    changeAnnColor(event){\n        //console.log('change color');\n\n        let hex = event.target.value;\n        let rgb_color = hexToRGB(hex);\n\n        this.setState(prevState =>{\n            return {\n                annColor: [rgb_color.r, rgb_color.g, rgb_color.b, prevState.annColor[3] ],\n                hexAnnColor: hex,\n            }\n        })\n\n    }\n}\nexport default AnnotationView;\n\n\nfunction saveAnnotation(){\n    // console.log('change opacity');\n}\n\nfunction cancelAnnotation(){\n    // console.log('change opacity');\n}\n\nfunction hexToRGB(hex) {\n  let result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  return result ? {\n    r: parseInt(result[1], 16),\n    g: parseInt(result[2], 16),\n    b: parseInt(result[3], 16)\n  } : null;\n}\n\n\n\n/*\n<BackgroundCanvas image={item} size={item.size} />\n                        <ColorCanvas size={item.size} />\n \n                        { this.displayMask(mask, item) }\n\n<ColorCanvas style={{ zIndex: 2, position:'absolute' }} size={item.size} />\n<OutlineCanvas style={{ zIndex: 3, position:'absolute' }} size={item.size} />\n                     \n*/\n// <img src={item.url} alt={item.name} draggable=\"false\" />\n"]},"metadata":{},"sourceType":"module"}