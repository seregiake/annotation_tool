{"ast":null,"code":"var _jsxFileName = \"/Users/serenagiachetti/Desktop/projects/annotation_tool/frontend/src/containers/AnnotationView.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport BackgroundCanvas from '../components/BackgroundCanvas';\nimport ColorCanvas from '../components/ColorCanvas';\nimport OutlineCanvas from '../components/OutlineCanvas';\nimport MaskSection from '../components/MaskSection';\n\nclass AnnotationView extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      item: [],\n      mask: [],\n      task: [],\n      annotation: [],\n      imageID: this.props.match.params.imageID,\n      taskID: this.props.match.params.taskID\n    };\n\n    this.fetchImage = () => {\n      this.setState({\n        imageID: this.props.match.params.imageID,\n        taskID: this.props.match.params.taskID\n      });\n      axios.get(\"http://127.0.0.1:5000/image/\" + this.state.imageID).then(res => {\n        this.setState({\n          item: res.data\n        }); // console.log(this.state);\n      });\n      axios.get(\"http://127.0.0.1:5000/tasks/\" + this.state.taskID).then(res => {\n        this.setState({\n          task: res.data\n        }); // console.log(this.state);\n\n        const user_id = 1;\n        axios.get(\"http://127.0.0.1:5000/masks/\" + user_id + \"/\" + this.state.imageID + \"/\" + this.state.task.super_id).then(res => {\n          this.setState({\n            mask: res.data\n          });\n          console.log(this.state);\n        });\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.fetchImage();\n    console.log(this.state);\n  }\n\n  setMaskSection(imageID, task, mask) {\n    if (typeof mask === 'string') {\n      return React.createElement(MaskSection, {\n        requestType: \"POST\",\n        imageID: imageID,\n        superID: task.super_id,\n        mask: mask,\n        btnText: \"Create\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      });\n    } else {\n      return React.createElement(MaskSection, {\n        requestType: \"PUT\",\n        imageID: imageID,\n        superID: task.super_id,\n        mask: mask,\n        btnText: \"Update\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      });\n    }\n  }\n\n  displayMask(mask, item) {\n    if (mask.length === 0) {\n      return;\n    } else {\n      return React.createElement(OutlineCanvas, {\n        size: item.size,\n        boundaries: mask.boundaries,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      });\n    }\n  }\n\n  render() {\n    const {\n      item,\n      mask,\n      task,\n      imageID\n    } = this.state;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"canvases_div\",\n      style: {\n        position: 'relative',\n        minHeight: '300px',\n        background: 'yellow'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(BackgroundCanvas, {\n      image: item,\n      size: item.size,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }), React.createElement(ColorCanvas, {\n      size: item.size,\n      mask: mask.mask,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }), this.displayMask(mask, item)), React.createElement(\"div\", {\n      style: {\n        paddingTop: 20,\n        minHeight: '800px',\n        color: 'rgb(25, 25, 112)'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, this.setMaskSection(imageID, task, mask)));\n  }\n\n}\n\nexport default AnnotationView;\n/*\n<BackgroundCanvas image={item} size={item.size} />\n                        <ColorCanvas size={item.size} />\n \n                        { this.displayMask(mask, item) }\n\n<ColorCanvas style={{ zIndex: 2, position:'absolute' }} size={item.size} />\n<OutlineCanvas style={{ zIndex: 3, position:'absolute' }} size={item.size} />\n                     \n*/\n// <img src={item.url} alt={item.name} draggable=\"false\" />","map":{"version":3,"sources":["/Users/serenagiachetti/Desktop/projects/annotation_tool/frontend/src/containers/AnnotationView.js"],"names":["React","Component","axios","BackgroundCanvas","ColorCanvas","OutlineCanvas","MaskSection","AnnotationView","state","item","mask","task","annotation","imageID","props","match","params","taskID","fetchImage","setState","get","then","res","data","user_id","super_id","console","log","componentDidMount","setMaskSection","displayMask","length","size","boundaries","render","position","minHeight","background","paddingTop","color"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport BackgroundCanvas from '../components/BackgroundCanvas';\nimport ColorCanvas from '../components/ColorCanvas';\nimport OutlineCanvas from '../components/OutlineCanvas';\nimport MaskSection from '../components/MaskSection';\n\n\nclass AnnotationView extends Component {\n\n    state = {\n        item: [],\n        mask: [],\n        task: [],\n        annotation: [],\n        imageID: this.props.match.params.imageID,\n        taskID: this.props.match.params.taskID\n    };\n\n    fetchImage = () => {\n        this.setState({\n            imageID: this.props.match.params.imageID,\n            taskID: this.props.match.params.taskID\n        });\n        axios.get(\"http://127.0.0.1:5000/image/\" + this.state.imageID).then(res => {\n          this.setState({\n            item: res.data\n        });\n        // console.log(this.state);\n        });\n        axios.get(\"http://127.0.0.1:5000/tasks/\" + this.state.taskID).then(res => {\n          this.setState({\n            task: res.data\n        });\n        // console.log(this.state);\n        const user_id = 1;\n        axios.get(\"http://127.0.0.1:5000/masks/\" + user_id + \"/\" + this.state.imageID + \"/\" + this.state.task.super_id).then(res => {\n            this.setState({\n                mask: res.data\n            });\n            console.log(this.state);\n            });\n        });\n        \n    }\n\n\n    componentDidMount() {\n        this.fetchImage();\n        console.log(this.state);\n    }\n\n\n    setMaskSection(imageID, task, mask){\n        if( typeof mask === 'string' ){\n            return <MaskSection\n            requestType=\"POST\"\n            imageID={ imageID }\n            superID={ task.super_id }\n            mask = { mask }\n            btnText=\"Create\" />\n\n        } else {\n            return <MaskSection\n            requestType=\"PUT\"\n            imageID={ imageID }\n            superID={ task.super_id }\n            mask = { mask }\n            btnText=\"Update\" />\n\n        }\n    }\n\n    displayMask(mask, item){\n        if(mask.length === 0){\n            return\n\n        } else {\n\n            return <OutlineCanvas\n                size={item.size}\n                boundaries={mask.boundaries}\n            />\n\n        }\n    }\n\n    \n    render() {\n        const { item, mask, task, imageID } = this.state;\n        return(\n                <div >\n                    <div id=\"canvases_div\" style={{ position:'relative', minHeight:'300px', background:'yellow' }}>\n                        <BackgroundCanvas image={item} size={item.size} />\n                        <ColorCanvas size={item.size} mask={mask.mask} />\n                        { this.displayMask(mask, item) }\n\n                    </div>\n                    <div style={{ paddingTop:20, minHeight:'800px', color:'rgb(25, 25, 112)' }}>\n                        { this.setMaskSection(imageID, task, mask) }\n\n                        \n                    </div> \n                </div>\n    \n           \n        )\n        \n    }\n    \n}\nexport default AnnotationView;\n\n\n/*\n<BackgroundCanvas image={item} size={item.size} />\n                        <ColorCanvas size={item.size} />\n \n                        { this.displayMask(mask, item) }\n\n<ColorCanvas style={{ zIndex: 2, position:'absolute' }} size={item.size} />\n<OutlineCanvas style={{ zIndex: 3, position:'absolute' }} size={item.size} />\n                     \n*/\n// <img src={item.url} alt={item.name} draggable=\"false\" />\n"]},"metadata":{},"sourceType":"module"}